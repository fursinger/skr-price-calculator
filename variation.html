<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Skribble Pricing Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<!-- Cache buster: v1734456789123 -->
<style>
  :root { --bg:#f6f8fb; --card:#ffffff; --ink:#1b2430; --muted:#5b6b7c; --line:#e5eaf0; --accent:#2563eb; }
  *{box-sizing:border-box}
  body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:var(--bg); color:var(--ink); padding:24px}
  h1{font-size:22px; margin:0 0 12px}
  .wrap{max-width:1200px; margin:0 auto; display:grid; gap:16px}
  .panel{background:var(--card); border:1px solid var(--line); border-radius:14px; padding:16px}
  .grid{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px}
  .grid3{display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:12px}
  @media (max-width:900px){ .grid, .grid3{grid-template-columns:1fr} }
  label{display:block; font-size:12px; color:var(--muted); margin:8px 0 6px}
  input[type=number]{width:100%; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:#f9fbff; color:var(--ink); font-size:14px}
  input[type=number]:focus{outline:none; border-color:#c7d7fe; box-shadow:0 0 0 3px rgba(37,99,235,.15)}
  .cards{display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:16px}
  @media (max-width:1100px){ .cards{grid-template-columns:repeat(2,minmax(0,1fr))} }
  @media (max-width:600px){ .cards{grid-template-columns:1fr} }
  .card{background:var(--card); border:1px solid var(--line); border-radius:14px; padding:16px}
  .title{display:flex; align-items:center; justify-content:space-between; margin-bottom:8px}
  .badge{padding:2px 8px; border:1px solid var(--line); border-radius:999px; font-size:11px; color:var(--muted)}
  .price{font-size:22px; font-weight:700}
  .row{display:flex; justify-content:space-between; font-size:13px; margin-top:6px}
  .muted{color:var(--muted)}
  .hr{height:1px; background:var(--line); margin:10px 0}
  .toggle{display:inline-flex; background:#f0f4ff; border:1px solid var(--line); border-radius:10px; padding:4px; gap:4px}
  .toggle button{border:0; background:transparent; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:600; color:#41516b}
  .toggle button.active{background:#ffffff; color:#0f172a; box-shadow:0 1px 0 rgba(0,0,0,.04)}
  /* Tier legend */
  .legend{display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:16px}
  @media (max-width:900px){ .legend{grid-template-columns:1fr} }
  .trow{display:flex; justify-content:space-between; border-bottom:1px dashed var(--line); padding:6px 0; font-size:13px}
  .thead{display:flex; justify-content:space-between; font-weight:600; padding-bottom:8px; border-bottom:1px solid var(--line)}
</style>
</head>
<body>
<div class="wrap">
  <h1>Skribble Pricing Calculator</h1>

  <!-- Inputs on top -->
  <div class="panel">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap">
      <h2 style="margin:0">Inputs</h2>
      <div class="toggle" aria-label="Billing period">
        <button id="btnMonthly" class="active">Monthly</button>
        <button id="btnYearly">Yearly</button>
      </div>
      <span class="badge">Volumes are per selected period</span>
    </div>

    <div class="grid" style="margin-top:10px">
      <div><label for="fullSeats">Full seats (can create, manage and sign signature requests)</label><input id="fullSeats" type="number" value="1" min="0"></div>
      <div><label for="signerSeats">Signer seats (can sign)</label><input id="signerSeats" type="number" value="0" min="0"></div>
    </div>

    <div class="grid3" style="margin-top:8px">
      <div><label for="ses">SES signatures / <span id="sesUnit">month</span></label><input id="ses" type="number" value="0" min="0"></div>
      <div><label for="aes">AES signatures / <span id="aesUnit">month</span></label><input id="aes" type="number" value="0" min="0"></div>
      <div><label for="qes">QES signatures / <span id="qesUnit">month</span></label><input id="qes" type="number" value="0" min="0"></div>
    </div>
  </div>

  <!-- Results as 4 columns -->
  <div class="cards" id="cards"></div>

  <!-- Tier explanation -->
  <div class="panel">
    <h2 style="margin-top:0">Pricing tiers (monthly, resets each month)</h2>
    <div class="legend">
      <div>
        <div class="thead"><span>SES range</span><span>€/unit</span></div>
        <div id="legendSES"></div>
      </div>
      <div>
        <div class="thead"><span>AES range</span><span>€/unit</span></div>
        <div id="legendAES"></div>
      </div>
      <div>
        <div class="thead"><span>QES range</span><span>€/unit</span></div>
        <div id="legendQES"></div>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  // More granular thresholds for PLG - smaller brackets at low end, bigger at high end
  const THRESHOLDS = [5, 10, 25, 50, 100, 250, 500, 1000, 2500, 5000, 10000, 25000, 50000, Infinity];

  // SES tiers - higher pricing for very low usage, then dropping to more competitive rates
  const SES_TIERS = [0.60, 0.50, 0.45, 0.40, 0.35, 0.30, 0.25, 0.22, 0.20, 0.18, 0.15, 0.12, 0.10, 0.08]
    .map((price, i)=>({ limit: THRESHOLDS[i], price }));

  // AES tiers - premium for very low usage, more dramatic volume discounts
  const AES_TIERS = [1.50, 1.00, 0.95, 0.90, 0.85, 0.75, 0.65, 0.55, 0.45, 0.35, 0.30, 0.25, 0.22, 0.20]
    .map((price, i)=>({ limit: THRESHOLDS[i], price }));

  // QES tiers - highest premium for very low usage, gradual discounts for volume
  const QES_TIERS = [2.50, 2.00, 1.90, 1.80, 1.70, 1.55, 1.40, 1.25, 1.15, 1.05, 1.00, 0.95, 0.90, 0.85]
    .map((price, i)=>({ limit: THRESHOLDS[i], price }));

  const PRICING = {
    plans: [
      { key:'free',    name:'Free',    monthlyFixed:0,  yearlyFixed:0,  seatMonthly:{full:0,  signer:0},  seatYearly:{full:0,   signer:0},  seatAware:false },
      { key:'starter', name:'Starter', monthlyFixed:11, yearlyFixed:108,seatMonthly:{full:0,  signer:0},  seatYearly:{full:0,   signer:0},  seatAware:false },
      { key:'team',    name:'Team',    monthlyFixed:0,  yearlyFixed:0,  seatMonthly:{full:20, signer:10}, seatYearly:{full:216, signer:108},seatAware:true  },
      { key:'pro',     name:'Pro',     monthlyFixed:0,  yearlyFixed:0,  seatMonthly:{full:36, signer:15}, seatYearly:{full:284, signer:144},seatAware:true  }
    ]
  };

  const $ = id => document.getElementById(id);
  const fmt = n => '€' + (Math.round(n*100)/100).toFixed(2);

  let period = 'monthly';
  function setPeriod(p){
    period = p;
    $('btnMonthly').classList.toggle('active', p==='monthly');
    $('btnYearly').classList.toggle('active', p==='yearly');
    ['sesUnit','aesUnit','qesUnit'].forEach(id=> $(id).textContent = p==='monthly' ? 'month' : 'year');
    compute();
    renderLegends();
  }

  function valInt(id){
    const n = parseInt($(id).value, 10);
    return Number.isFinite(n) && n >= 0 ? n : 0;
  }

  // Marginal bracket pricing
  function marginalCost(units, tiers){
    let remaining = units, prev = 0, cost = 0;
    for (const t of tiers){
      if (remaining <= 0) break;
      const span = (t.limit === Infinity ? remaining : Math.max(0, t.limit - prev));
      const take = Math.min(remaining, span);
      cost += take * t.price;
      remaining -= take;
      prev = (t.limit === Infinity ? prev + take : t.limit);
    }
    return cost;
  }

  function totalsForPeriod(){
    const full = valInt('fullSeats');
    const signer = valInt('signerSeats');
    const sesUnits = valInt('ses');
    const aesUnits = valInt('aes');
    const qesUnits = valInt('qes');

    // Calculate monthly usage cost (tiers reset each month)
    const monthlyUsageCost = {
      ses: marginalCost(period === 'monthly' ? sesUnits : sesUnits / 12, SES_TIERS),
      aes: marginalCost(period === 'monthly' ? aesUnits : aesUnits / 12, AES_TIERS),
      qes: marginalCost(period === 'monthly' ? qesUnits : qesUnits / 12, QES_TIERS)
    };

    // For yearly billing, multiply monthly usage by 12 since tiers reset each month
    const usageCost = period === 'monthly' 
      ? monthlyUsageCost
      : {
          ses: monthlyUsageCost.ses * 12,
          aes: monthlyUsageCost.aes * 12,
          qes: monthlyUsageCost.qes * 12
        };

    return PRICING.plans.map(p=>{
      const subSeats = (period==='monthly')
        ? (p.seatAware ? full*p.seatMonthly.full + signer*p.seatMonthly.signer : p.monthlyFixed)
        : (p.seatAware ? full*p.seatYearly.full  + signer*p.seatYearly.signer  : p.yearlyFixed);

      const total = subSeats + usageCost.ses + usageCost.aes + usageCost.qes;

      return {
        name: p.name,
        subSeats,
        ses: usageCost.ses,
        aes: usageCost.aes,
        qes: usageCost.qes,
        total
      };
    });
  }

  function renderCards(){
    const rows = totalsForPeriod();
    const sesUnits = valInt('ses');
    const aesUnits = valInt('aes');
    const qesUnits = valInt('qes');
    
    $('cards').innerHTML = rows.map(r=>`
      <div class="card">
        <div class="title"><strong>${r.name}</strong><span class="badge">${period==='monthly'?'Per month':'Per year'}</span></div>
        <div class="price">${fmt(r.total)}</div>
        <div class="hr"></div>
        <div class="row"><span class="muted">Subscription / seats</span><span>${fmt(r.subSeats)}</span></div>
        <div class="row"><span class="muted">SES usage (${sesUnits.toLocaleString()})</span><span>${fmt(r.ses)}</span></div>
        <div class="row"><span class="muted">AES usage (${aesUnits.toLocaleString()})</span><span>${fmt(r.aes)}</span></div>
        <div class="row"><span class="muted">QES usage (${qesUnits.toLocaleString()})</span><span>${fmt(r.qes)}</span></div>
      </div>
    `).join('');
  }

  function renderLegends(){
    $('legendSES').innerHTML = buildLegend(SES_TIERS);
    $('legendAES').innerHTML = buildLegend(AES_TIERS);
    $('legendQES').innerHTML = buildLegend(QES_TIERS);
  }

  function buildLegend(tiers){
    let prev = 0;
    return tiers.map(t=>{
      let label;
      if (t.limit === Infinity){
        label = '>' + prev.toLocaleString();
      } else if (prev === 0){
        label = '0–' + t.limit.toLocaleString();
      } else {
        label = (prev+1).toLocaleString() + '–' + t.limit.toLocaleString();
      }
      prev = (t.limit === Infinity ? prev : t.limit);
      return `<div class="trow"><span>${label}</span><span>${fmt(t.price)}</span></div>`;
    }).join('');
  }

  function compute(){
    renderCards();
  }

  // Events
  ['fullSeats','signerSeats','ses','aes','qes'].forEach(id=>{
    $(id).addEventListener('input', compute);
    $(id).addEventListener('change', compute);
  });
  $('btnMonthly').addEventListener('click', ()=> setPeriod('monthly'));
  $('btnYearly').addEventListener('click', ()=> setPeriod('yearly'));

  // Init
  setPeriod('monthly');
})();
</script>
</body>
</html>